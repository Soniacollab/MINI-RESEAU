{% extends 'base.html.twig' %}

{% block title %}Publier un message{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.previewImage = function(event) {
                const input = event.target;
                const preview = document.getElementById('imagePreview');
                if (input.files && input.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    }
                    reader.readAsDataURL(input.files[0]);
                } else {
                    preview.src = '';
                    preview.style.display = 'none';
                }
            }
        });
    </script>
{% endblock %}

{% block body %}
    <div class="container py-5">
        <div class="col-8 mx-auto">
            <h1 class="text-2xl font-bold mb-4">Ajouter un message</h1>
            {{ form_start(form) }}
            {% include 'partials/_form.html.twig' with { form: form, message: message } %}
            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}
