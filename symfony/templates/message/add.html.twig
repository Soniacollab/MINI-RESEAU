{% extends 'base.html.twig' %}

{% block title %}
    {{ message.id ? 'Modifier le message' : 'Publier un message' }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            window.previewImage = function(event) {
                const input = event.target;
                const preview = document.getElementById('imagePreview');
                if (input.files && input.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    }
                    reader.readAsDataURL(input.files[0]);
                } else {
                    preview.src = '';
                    preview.style.display = 'none';
                }
            }
        });
    </script>
{% endblock %}

{% block body %}
    <div class="flex flex-col h-screen items-center justify-center bg-purple-200 dark:bg-gray-700">
        <div class="mx-auto p-4 rounded-lg shadow-lg w-2/4 bg-white dark:bg-gray-800 dark:text-gray-100">
            <h1 class="text-2xl font-bold mb-4">
                {{ message.id ? 'Modifier le message' : 'Publier un message' }}
            </h1>

            {{ form_start(form) }}
            {% include 'partials/_form.html.twig' with { form: form, message: message } %}
            {{ form_end(form) }}
        </div>
    </div>
{% endblock %}
