<div class="bg-gray-100 dark:bg-gray-800 shadow-md rounded-lg p-4 mb-6 flex flex-col">
    <h2 class="text-lg font-bold text-gray-800 dark:text-gray-100 mb-2">{{ message.title }}</h2>

    {% if message.image %}
        <div class="overflow-hidden rounded-lg mb-3">
            <img src="{{ asset('uploads/' ~ message.image) }}" alt="Image du message" class="w-full h-48 object-cover">
        </div>
    {% endif %}

    <p class="text-gray-700 dark:text-gray-200 mb-2">{{ message.content|slice(0, 150) ~ (message.content|length > 150 ? '...' : '') }}</p>

    <p class="text-sm text-gray-500 dark:text-gray-400 mb-3">
        Post√© par <strong>{{ message.author.firstname }} {{ message.author.lastname }}</strong>
        le {{ message.createdAt|date('d/m/Y H:i') }}
    </p>

    <div class="mt-auto flex flex-wrap gap-2">
        <a href="{{ path('message_show', {'id': message.id}) }}" class="bg-blue-500 text-white rounded px-3 py-1 hover:bg-blue-600 transition">Voir</a>

        {% if app.user and app.user == message.author %}
            <a href="{{ path('message_edit', {'id': message.id}) }}" class="bg-yellow-500 text-black rounded px-3 py-1 hover:bg-yellow-600 transition">Modifier</a>
        {% endif %}

        {% if app.user and (app.user.id == message.author.id or is_granted('ROLE_ADMIN')) %}
            <a href="{{ path('message_delete', {'id': message.id}) }}" class="bg-red-500 text-white rounded px-3 py-1 hover:bg-red-600 transition">Supprimer</a>
        {% endif %}
    </div>
</div>
